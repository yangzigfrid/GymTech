<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GymTech</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Estilos base e fontes */
    body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        background-image: url('https://i.postimg.cc/Y4rqjL3K/background-gym.jpg'); /* Imagem de fundo da academia */
        background-size: cover;
        background-position: center;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #e2e8f0; /* Cor padrão do texto para tema escuro */
    }
    /* Overlay escuro sobre a imagem de fundo para melhorar a legibilidade do texto */
    .bg-overlay {
        position: absolute;
        inset: 0;
        background-color: black;
        opacity: 0.7; /* Mais escuro para contraste tecnológico */
        z-index: 0; /* Garante que fique atrás do conteúdo principal */
    }
    /* Animação personalizada para o título principal */
    @keyframes pulse-fade {
        0%, 100% {
            opacity: 1;
            transform: scale(1);
        }
        50% {
            opacity: 0.9;
            transform: scale(1.01);
        }
    }
    .animate-pulse-fade {
        animation: pulse-fade 3s ease-in-out infinite;
    }
    /* Animação para modais (pop-ups) */
    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    .animate-fade-in-up {
        animation: fade-in-up 0.3s ease-out forwards;
    }
    /* Animação para mensagens temporárias (erros/sucesso) */
    @keyframes fade-in {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    .animate-fade-in {
        animation: fade-in 0.3s ease-out forwards;
    }
    /* Estilos para inputs e textareas */
    input, select, textarea {
        background-color: rgba(30, 41, 59, 0.7); /* bg-slate-800 com opacidade */
        border-color: #4a5568; /* gray-600 */
        color: #e2e8f0; /* text-gray-200 */
    }
    input:focus, select:focus, textarea:focus {
        border-color: #6366f1; /* indigo-500 */
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5); /* indigo-500 com opacidade */
    }
    /* Style for primary buttons (blue) */
    .btn-primary {
        background-color: #4f46e5; /* indigo-600 */
        color: white;
        box-shadow: 0 4px 14px 0 rgba(79, 70, 229, 0.39);
    }
    .btn-primary:hover {
        background-color: #4338ca; /* indigo-700 */
        transform: scale(1.05);
    }
    /* Style for success buttons (green) */
    .btn-success {
        background-color: #10b981; /* emerald-500 */
        color: white;
        box-shadow: 0 4px 14px 0 rgba(16, 185, 129, 0.39);
    }
    .btn-success:hover {
        background-color: #059669; /* emerald-600 */
        transform: scale(1.05);
    }
    /* Style for danger buttons (red) */
    .btn-danger {
        background-color: #dc2626; /* red-600 */
        color: white;
        box-shadow: 0 4px 14px 0 rgba(220, 38, 38, 0.39);
    }
    .btn-danger:hover {
        background-color: #b91c1c; /* red-700 */
        transform: scale(1.05);
    }
    /* Style for neutral buttons (gray) */
    .btn-neutral {
        background-color: #6b7280; /* gray-500 */
        color: white;
        box-shadow: 0 4px 14px 0 rgba(107, 114, 128, 0.39);
    }
    .btn-neutral:hover {
        background-color: #4b5563; /* gray-600 */
        transform: scale(1.05);
    }
  </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">
  <div id="app-root" class="p-6 w-full max-w-md"></div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

  <script>
    // ----- Config Firebase -----
    const firebaseConfig = {
      apiKey: "AIzaSyD5Bc5ex-R-jZF3sw2zSf-OJaS1dfn1e1c",
      authDomain: "gymtech-2f998.firebaseapp.com",
      projectId: "gymtech-2f998",
      storageBucket: "gymtech-2f998.appspot.com",
      messagingSenderId: "831193221171",
      appId: "1:831193221171:web:41394939052f7b46",
      measurementId: "G-MHEF18CNYY"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // ----- Estado Global -----
    let currentUser = null;
    let authError = "";
    let isLoginMode = true;
    let isWorkoutModalOpen = false;

    const appRoot = document.getElementById("app-root");

    // ----- Dados do Treino de Peito (Exemplo) -----
    const chestWorkout = {
      name: "Treino de Peito",
      exercises: [
        { name: "Supino Reto", description: "6-12 repetições. Hipertrofia do peitoral." },
        { name: "Supino Inclinado", description: "6-12 repetições. Parte superior do peito." },
        { name: "Supino Declinado", description: "8-15 repetições. Parte inferior do peito." },
        { name: "Crucifixo com Halteres", description: "10-15 repetições. Alongamento e definição." },
        { name: "Crossover", description: "10-15 repetições. Isola o peito." }
      ],
      machines: [
        { name: "Smith Machine", description: "Para supino reto e inclinado." },
        { name: "Chest Press Machine", description: "Para supino seguro e ajustável." },
        { name: "Crossover Machine", description: "Para exercício de crossover." },
        { name: "Pec Deck", description: "Para isolar o peito." }
      ]
    };

    // ----- Função de Renderização do App -----
    function renderApp() {
      if (!currentUser) {
        // Tela de login/registro
        appRoot.innerHTML = `
          <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700">
            <h2 class="text-2xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
              ${isLoginMode ? "Login" : "Criar Conta"}
            </h2>
            ${authError ? `<p class="bg-red-700 p-2 mb-3 rounded text-sm border border-red-500">${authError}</p>` : ""}
            <form id="auth-form" class="flex flex-col gap-3">
              <input id="auth-email" type="email" placeholder="E-mail" class="p-2 rounded text-black bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
              <input id="auth-password" type="password" placeholder="Senha" class="p-2 rounded text-black bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
              <button type="submit" class="bg-blue-600 py-2 rounded hover:bg-blue-700 transition-all duration-200">
                ${isLoginMode ? "Entrar" : "Registrar"}
              </button>
            </form>
            <button id="toggle-auth-mode-btn" class="mt-4 text-blue-400 hover:underline transition-colors duration-200">
              ${isLoginMode ? "Não tem conta? Criar agora" : "Já tem conta? Fazer login"}
            </button>
          </div>
        `;
        attachAuthListeners();
        return;
      }

      // Tela principal do app
      appRoot.innerHTML = `
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg text-center border border-gray-700">
          <h2 class="text-xl mb-4 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">Bem-vindo, ${currentUser.email}</h2>
          <button id="open-workout-btn" class="bg-green-600 py-2 px-4 rounded hover:bg-green-700 transition-all duration-200 mb-4">
            Abrir Modal de Treino
          </button>
          <br>
          <button id="logout-btn" class="bg-red-600 py-2 px-4 rounded hover:bg-red-700 transition-all duration-200">Sair</button>
        </div>
      `;

      // Listeners da tela principal
      document.getElementById("logout-btn").addEventListener("click", () => {
        auth.signOut();
      });

      document.getElementById("open-workout-btn").addEventListener("click", () => {
        if (!isWorkoutModalOpen) {
          renderWorkoutModal(chestWorkout);
        }
      });
    }

    // ----- Função para Modal de Treino -----
    function renderWorkoutModal(workout) {
      isWorkoutModalOpen = true;

      const modal = document.createElement("div");
      modal.id = "workout-modal";
      modal.className = "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in-up";
      modal.innerHTML = `
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg w-96 relative text-white max-h-[80vh] overflow-y-auto border border-gray-700">
          <h2 class="text-xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">${workout.name}</h2>

          <h3 class="font-semibold mt-2 mb-1 text-gray-300">Exercícios:</h3>
          <ul class="mb-4 list-disc list-inside text-gray-400">
            ${workout.exercises.map(e => `<li><strong>${e.name}</strong>: ${e.description}</li>`).join('')}
          </ul>

          <h3 class="font-semibold mt-2 mb-1 text-gray-300">Máquinas:</h3>
          <ul class="mb-4 list-disc list-inside text-gray-400">
            ${workout.machines.map(m => `<li><strong>${m.name}</strong>: ${m.description}</li>`).join('')}
          </ul>

          <button id="close-modal-btn" class="absolute top-2 right-2 text-red-400 hover:text-red-200 font-bold text-lg transition-colors duration-200">&times;</button>
        </div>
      `;
      document.body.appendChild(modal);

      document.getElementById("close-modal-btn").onclick = () => {
        modal.remove();
        isWorkoutModalOpen = false;
      };
    }

    // ----- Listeners de Login/Registro -----
    function attachAuthListeners() {
      const form = document.getElementById("auth-form");
      if (form) { // Garante que o formulário existe antes de tentar anexar o listener
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          const email = document.getElementById("auth-email").value;
          const password = document.getElementById("auth-password").value;

          try {
            if (isLoginMode) {
              const userCred = await auth.signInWithEmailAndPassword(email, password);
              currentUser = userCred.user;
            } else {
              const userCred = await auth.createUserWithEmailAndPassword(email, password);
              currentUser = userCred.user;
            }
            authError = "";
          } catch (err) {
            authError = err.message;
          }
          renderApp();
        });
      }


      const toggleAuthModeBtn = document.getElementById("toggle-auth-mode-btn");
      if (toggleAuthModeBtn) { // Garante que o botão existe
        toggleAuthModeBtn.addEventListener("click", () => {
          isLoginMode = !isLoginMode;
          authError = "";
          renderApp();
        });
      }
    }

    // ----- Mantém login persistente -----
    auth.onAuthStateChanged((user) => {
      currentUser = user;
      renderApp();
    });

    // Render inicial
    renderApp();
  </script>
</body>
</html>
